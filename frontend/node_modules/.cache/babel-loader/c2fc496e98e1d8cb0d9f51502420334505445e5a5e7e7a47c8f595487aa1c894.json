{"ast":null,"code":"import * as React from 'react';\nexport const CompoundComponentContext = /*#__PURE__*/React.createContext(null);\nCompoundComponentContext.displayName = 'CompoundComponentContext';\n/**\n * Provides a way for a component to know about its children.\n *\n * Child components register themselves with the `useCompoundItem` hook, passing in arbitrary metadata to the parent.\n *\n * This is a more powerful altervantive to `children` traversal, as child components don't have to be placed\n * directly inside the parent component. They can be anywhere in the tree (and even rendered by other components).\n *\n * The downside is that this doesn't work with SSR as it relies on the useEffect hook.\n *\n * @ignore - internal hook.\n */\nexport function useCompoundParent() {\n  const [subitems, setSubitems] = React.useState(new Map());\n  const subitemKeys = React.useRef(new Set());\n  const deregisterItem = React.useCallback(function deregisterItem(id) {\n    subitemKeys.current.delete(id);\n    setSubitems(previousState => {\n      const newState = new Map(previousState);\n      newState.delete(id);\n      return newState;\n    });\n  }, []);\n  const registerItem = React.useCallback(function registerItem(id, item, missingKeyGenerator) {\n    let providedOrGeneratedId;\n    if (id === undefined) {\n      if (missingKeyGenerator === undefined) {\n        throw new Error(\"The compound component's child doesn't have a key. You need to provide a missingKeyGenerator to generate it.\");\n      }\n      providedOrGeneratedId = missingKeyGenerator(subitemKeys.current);\n    } else {\n      providedOrGeneratedId = id;\n    }\n    subitemKeys.current.add(providedOrGeneratedId);\n    setSubitems(previousState => {\n      const newState = new Map(previousState);\n      newState.set(providedOrGeneratedId, item);\n      return newState;\n    });\n    return {\n      id: providedOrGeneratedId,\n      deregister: () => deregisterItem(providedOrGeneratedId)\n    };\n  }, [deregisterItem]);\n  const getItemIndex = React.useCallback(function getItemIndex(id) {\n    return Array.from(subitems.keys()).indexOf(id);\n  }, [subitems]);\n  return {\n    contextValue: {\n      getItemIndex,\n      registerItem,\n      totalSubitemCount: subitems.size\n    },\n    subitems\n  };\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}